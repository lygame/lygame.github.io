System.register("chunks:///_virtual/AppLauncher.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,n,o,s,r,a,l,c,u,h,p,d,f,g,y,_,w;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,s=e.createClass},function(e){r=e.cclegacy,a=e._decorator,l=e.Prefab,c=e.isValid,u=e.macro,h=e.game,p=e.profiler,d=e.director,f=e.view,g=e.assetManager,y=e.screen,_=e.ResolutionPolicy,w=e.Component}],execute:function(){var z,v,A,D,R,S;r._RF.push({},"c9dceoUMANL4IrNlmwFW902","AppLauncher",void 0);var T=a.ccclass,I=a.property;e("AppLauncher",(z=T("AppLauncher"),v=I(l),z(((S=function(e){function i(){for(var i,t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return(i=e.call.apply(e,[this].concat(s))||this).TAG="[AppLauncher]: ",n(i,"viewPrefab",R,o(i)),i}t(i,e);var r=i.prototype;return r.onLoad=function(){c(i._instance)?this.destroy():(i._instance=this,this._init())},r._init=function(){u.ENABLE_MULTI_TOUCH=!1,h.frameRate=40,p.hideStats(),d.addPersistRootNode(this.node),f.resizeWithBrowserSize(!0),g.downloader.maxRetryCount=10,g.downloader.retryInterval=3e3,this._fit(),f.on("canvas-resize",this._fit,this)},r.onDestroy=function(){f.targetOff(this)},r._fit=function(){y.windowSize.width/f.getDesignResolutionSize().width<y.windowSize.height/f.getDesignResolutionSize().height?(f.setResolutionPolicy(_.FIXED_WIDTH),console.log(this.TAG+"setResolutionPolicy: FIXED_WIDTH")):(f.setResolutionPolicy(_.FIXED_HEIGHT),console.log(this.TAG+"setResolutionPolicy: FIXED_HEIGHT"));var e=f.getDesignResolutionSize(),i=f.getVisibleSize();console.log(this.TAG+"screenSize: "+y.windowSize),console.log(this.TAG+"designSize: "+e),console.log(this.TAG+"visibleSize: "+i)},s(i,null,[{key:"instance",get:function(){return this._instance}}]),i}(w))._instance=null,R=i((D=S).prototype,"viewPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=D))||A));r._RF.pop()}}}));

System.register("chunks:///_virtual/ChannelConfig.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"df6edi+BQNPUZ1z7U6NsjmA","ChannelConfig",void 0);e("ChannelConfig",{channelId:"10101",channelName:"ALPHA",platform:"android",isUpdate:!0,updateRootUrls:["https://lygame-github-io.pages.dev/games/dzxx/channels/c10101/hotupdate","https://lygame.github.io/games/dzxx/channels/c10101/hotupdate"]});n._RF.pop()}}}));

System.register("chunks:///_virtual/LaunchView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppLauncher.ts"],(function(s){var e,t,r,n,i,o,h,a,c,u,l,g,_,d,p,f;return{setters:[function(s){e=s.inheritsLoose,t=s.createClass},function(s){r=s.cclegacy,n=s._decorator,i=s.view,o=s.Label,h=s.ProgressBar,a=s.Widget,c=s.Sprite,u=s.UITransform,l=s.misc,g=s.isValid,_=s.AssetManager,d=s.assetManager,p=s.Component},function(s){f=s.AppLauncher}],execute:function(){var P;r._RF.push({},"d4d1cIPSQtO/JSQco74hbSZ","LaunchView",void 0);var m=n.ccclass;n.property,s("LaunchView",m("LaunchView")(P=function(s){function r(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=s.call.apply(s,[this].concat(r))||this).TAG="[LaunchView]: ",e.COMP_NAME_APPCOMP="AppComp",e.COMP_NAME_GAMEAPP="GameApp",e._bg=void 0,e._progressBar=void 0,e._progressLabel=void 0,e._versionLabel=void 0,e._inited=!1,e._startProgress=0,e._toProgress=0,e._progressTime=0,e._progressScheduleTimer=0,e._launchProgress=0,e}e(r,s);var n=r.prototype;return n.onLoad=function(){console.log(this.TAG+"onload"),this._init(),this._fitBg(),i.on("canvas-resize",this._delayFitBg,this)},n.start=function(){console.log(this.TAG+"start"),this._doLaunch()},n.onDestroy=function(){this.unschedule(this.updateProgress),i.targetOff(this)},n._init=function(){if(!this._inited){this._inited=!0,this._bg=this.node.getChildByName("bg");var s=this.node.getChildByName("root");this._versionLabel=s.getChildByName("version").getComponent(o),this._versionLabel.string="",this._progressBar=s.getChildByName("progress").getComponent(h),this._progressBar.progress=0,this._progressLabel=s.getChildByPath("progress/Label").getComponent(o),this._progressLabel.string=""}},n._delayFitBg=function(){this.unschedule(this._fitBg),this.scheduleOnce(this._fitBg,0)},n._fitBg=function(){if(this._init(),this._bg){var s=this._bg.getComponent(a);s&&(s.enabled=!1);var e=this._bg.getComponent(c);e&&(e.sizeMode=c.SizeMode.TRIMMED,e.type=c.Type.SIMPLE,e.trim=!0);var t=i.getVisibleSize(),r=this._bg.getComponent(u).contentSize,n=Math.max(t.width/r.width,t.height/r.height);n=Math.max(1,n),this._bg.setScale(n,n),console.log(this.TAG+"bg scale:"+n)}},n.refreshProgress=function(s){this._init();var e=l.clampf(s/100,0,1);this._progressBar.progress=e,this._progressLabel.string=Math.floor(100*e)+"%"},n.updateProgress=function(s){if(this._progressScheduleTimer+=s,this._progressScheduleTimer>=this._progressTime)this.finishToProgress();else{var e=this._toProgress-this._startProgress,t=this._startProgress+e*(this._progressScheduleTimer/this._progressTime);this.refreshProgress(t)}},n.finishToProgress=function(){this.unschedule(this.updateProgress),this.refreshProgress(this._toProgress)},n.setToProgress=function(s,e){void 0===e&&(e=.5),this._init(),this.unschedule(this.updateProgress),this._startProgress=l.clampf(100*this._progressBar.progress,0,100),this._toProgress=l.clampf(s,0,100),this._progressTime=e,this._progressScheduleTimer=0,this.schedule(this.updateProgress)},n._doLaunch=function(){var s=this;return console.log(this.TAG+"do launch"),this._launchProgress=0,Promise.resolve().then((function(){if(g(s))return s._loadBundles([_.BuiltinBundleName.INTERNAL,_.BuiltinBundleName.MAIN],5)})).then((function(){if(g(s))return s._loadBundles(["scripts"],5)})).then((function(){if(g(s))return s._loadBundles(["arts"],10)})).then((function(){if(g(s))return s._doIappLaunch(80)})).then((function(){if(g(s))return s._onLaunchFinish()})).catch((function(e){g(s)&&console.error(s.TAG+"do launch error: ",e)}))},n._onLaunchFinish=function(){console.log(this.TAG+"on launch finish"),this.launchProgress=100},n._loadBundles=function(s,e){var t=this;console.log(this.TAG+"load bundles start: "+s);var r=this.launchProgress,n=function(s){g(t)&&(t.launchProgress=r+e*s)};return new Promise((function(i,o){var h=s.length,a=0,c=0;!function u(){var l=s[a++];l?d.getBundle(l)?(c++,n(c/h),u()):d.loadBundle(l,(function(s,e){s?g(t)&&console.error(t.TAG+"load bundle error: ",l):(c++,n(c/h)),u()})):c==h?(g(t)&&(t.launchProgress=r+e,console.log(t.TAG+"load bundles success: "+s)),i(null)):o()}()}))},n._getIapp=function(){var s,e,t=null;t=null!=(e=t=null!=(s=t)?s:f.instance.getComponent(this.COMP_NAME_GAMEAPP))?e:f.instance.getComponent(this.COMP_NAME_APPCOMP);try{t||(t=f.instance.addComponent(this.COMP_NAME_GAMEAPP))}catch(s){console.log(s)}try{t||(t=f.instance.addComponent(this.COMP_NAME_APPCOMP))}catch(s){console.log(s)}return t},n._doIappLaunch=function(s){var e=this,t=this._getIapp();if(t&&t.setLaunchViewPrefab&&t&&t.launchStart){t.setLaunchViewPrefab(f.instance.viewPrefab);var r=this.launchProgress;return t.launchStart((function(t){g(e)&&(isNaN(t)||(t=l.clampf(t,0,1),e.launchProgress=r+s*t))}))}},t(r,[{key:"launchProgress",get:function(){return this._launchProgress},set:function(s){s<=this._launchProgress||(this._launchProgress=s,this.setToProgress(this._launchProgress))}}]),r}(p))||P);r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AppLauncher.ts","./ChannelConfig.ts","./LaunchView.ts"],(function(){return{setters:[null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});